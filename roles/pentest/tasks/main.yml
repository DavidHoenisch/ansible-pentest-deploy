---
- name: get msf installer
  become: yes
  become_user: '{{ ops_user }}'
  get_url:
    url: https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb
    dest: /tmp/msfinstall
    mode: 0755

- name: install metasploit framework
  become: yes
  become_user: '{{ ops_user }}'
  shell: ./msfinstall
  args:
    chdir: /tmp

- name: initialize msf
  become: yes
  become_user: '{{ ops_user }}'
  shell: echo 'yes' | msfconsole

- name: cleanup msf installer files
  file:
    path: /tmp/msfinstall
    state: absent

- name: get cme
  git:
    repo: https://github.com/byt3bl33d3r/CrackMapExec
    dest: /opt/cme
    update: yes
    track_submodules: yes
    recursive: yes

- name: install cme
  shell: python setup.py install
  args:
    chdir: /opt/cme

- name: get empire
  git:
    repo: https://github.com/EmpireProject/Empire
    dest: /opt/empire
    update: yes

- name: get beef (requires `gem install bundler && bundle install`)
  git:
    repo: https://github.com/beefproject/beef
    dest: /opt/beef
    update: yes

- name: get ikeforce
  git:
    repo: https://github.com/SpiderLabs/ikeforce
    dest: /opt/ikeforce
    update: yes

- name: get impacket
  git:
    repo: https://github.com/CoreSecurity/impacket
    dest: /opt/impacket
    update: yes

- name: install impacket
  shell: python setup.py install
  args:
    chdir: /opt/impacket

- name: get pre-req for enum4linux
  get_url:
    url: https://raw.githubusercontent.com/Wh1t3Fox/polenum/master/polenum.py
    dest: /usr/bin/polenum.py
    mode: 0755

- name: get responder
  git:
    repo: https://github.com/lgandx/Responder
    dest: /opt/responder
    update: yes

- name: get routersploit
  git:
    repo: https://github.com/reverse-shell/routersploit
    dest: /opt/routersploit
    update: yes

- name: install routersploit
  pip:
    requirements: requirements.txt
  args:
    chdir: /opt/routersploit

- name: get set
  git:
    repo: https://github.com/trustedsec/social-engineer-toolkit
    dest: /opt/set
    update: yes

- name: install set
  shell: python setup.py install
  args:
    chdir: /opt/set

- name: get sqlmap
  git:
    repo: https://github.com/sqlmapproject/sqlmap
    dest: /opt/sqlmap
    update: yes

- name: install gobuster
  shell: /usr/local/go/bin/go get github.com/OJ/gobuster
  environment:
    GOPATH: /opt/go
  args:
    chdir: /opt/go/

- name: get dnsrecon
  git:
    repo: https://github.com/darkoperator/dnsrecon
    dest: /opt/dnsrecon
    update: yes

- name: install dnsrecon
  pip:
    requirements: requirements.txt
  args:
    chdir:
      /opt/dnsrecon

- name: get enum4linux
  git:
    repo: https://github.com/portcullislabs/enum4linux
    dest: /opt/enum4linux
    update: yes

- name: get eyewitness
  git:
    repo: https://github.com/ChrisTruncer/EyeWitness
    dest: /opt/eyewitness
    update: yes

- name: install eyewitness
  shell: ./setup.sh
  args:
    chdir: /opt/eyewitness/setup

- name: get goofile
  git:
    repo: https://github.com/crunchsec/goofile
    dest: /opt/goofile
    update: yes

- name: get rawr
  git:
    repo: https://bitbucket.org/al14s/rawr
    dest: /opt/rawr
    update: yes

- name: install rawr
  shell: ./install.sh y
  args:
    chdir: /opt/rawr

- name: get theharvester
  git:
    repo: https://github.com/laramies/theHarvester
    dest: /opt/theharvester
    update: yes

- name: get wafw00f
  git:
    repo: https://github.com/EnableSecurity/wafw00f
    dest: /opt/wafw00f
    update: yes

- name: install wafw00f
  shell: python setup.py install
  args:
    chdir: /opt/wafw00f

- name: get meterssh
  git:
    repo: https://github.com/trustedsec/meterssh
    dest: /opt/meterssh
    update: yes

- name: get ike-scan
  git:
    repo: https://github.com/royhills/ike-scan
    dest: /opt/ike-scan
    update: yes

- name: configure ike-scan
  shell: autoreconf --install; ./configure --with-openssl
  args:
    chdir: /opt/ike-scan

- name: make ike-scan
  shell: make; make install
  args:
    chdir: /opt/ike-scan

- name: get wpscan (requires `gem install bundler && bundle install`)
  git:
    repo: https://github.com/wpscanteam/wpscan
    dest: /opt/wpscan
    update: yes















